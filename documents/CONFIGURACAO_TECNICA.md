# Configura√ß√£o T√©cnica do Simulador - Especifica√ß√µes Detalhadas

## üèÜ Vers√£o Atual: v2.0 - Simulador MLS-3A (Po√ßo Real)

> **ATEN√á√ÉO**: Este documento cont√©m o hist√≥rico t√©cnico das vers√µes 1.1-1.3.  
> Para especifica√ß√µes da **v2.0 MLS-3A**, consulte: `ESPECIFICACOES_TECNICAS_MLS-3A.md`

### üöÄ TRANSFORMA√á√ÉO v2.0 - MLS-3A (Po√ßo Real)
- üèÜ **Po√ßo Real**: Baseado no MLS-3A (Marlim Sul, 26 anos de hist√≥rico)
- üìä **Par√¢metros Aut√¨anticos**: Dados reais da Petrobras/ANP
- ‚öîÔ∏è **Modelos Calibrados**: IPR, viscosidade, decl√≠nio customizados
- üîç **Validado**: 60 testes, 100% aprovados, benchmarking SPE
- üéì **Educacional**: Prepara√ß√£o profissional com po√ßo real brasileiro

### Melhorias da v1.3 (Simula√ß√£o e Monitoramento) - HIST√ìRICO
- ‚úÖ **Intervalos Bacia de Campos**: 5 segundos (padr√£o Petrobras COI)
- ‚úÖ **Produ√ß√£o Din√¢mica**: Vaz√£o vari√°vel com decl√≠nio realista
- ‚úÖ **Variabilidade Operacional**: Flutua√ß√µes ¬±2% simulando condi√ß√µes reais
- ‚úÖ **Sistema de Alertas Escalonado**: Cr√≠ticos a cada 30 segundos
- ‚úÖ **F√≠sica Aprimorada**: Deple√ß√£o acelerada e efeitos vis√≠veis
- ‚úÖ **Contexto Educacional**: Refer√™ncias √† ind√∫stria brasileira

### Melhorias da v1.2 (Interface)
- ‚úÖ **Dark Mode Profissional**: Fundo preto com esquema de cores industriais
- ‚úÖ **Layout Responsivo**: ScrollArea autom√°tica e grid organizacional
- ‚úÖ **Sistema de Abas**: Navega√ß√£o eficiente para gr√°ficos
- ‚úÖ **C√≥digo Modularizado**: Helper functions e design patterns
- ‚úÖ **UX/UI Otimizada**: Cards, hover effects e hierarquia visual clara

## üìä Par√¢metros do MLS-3A - Dados Reais (v2.0)

> **IMPORTANTE**: Os par√¢metros abaixo s√£o **HIST√ìRICOS** (v1.1-1.3).  
> **v2.0** usa dados **REAIS** do po√ßo MLS-3A. Ver: `ESPECIFICACOES_TECNICAS_MLS-3A.md`

### ‚ö†Ô∏è Configura√ß√£o Hist√≥rica da Classe Reservatorio (v1.3)

```cpp
// *** VERS√ÉO ANTIGA v1.3 - SUBSTITU√çDA PELA v2.0 MLS-3A ***
// Construtor com valores gen√©ricos (N√ÉO mais usado)
Reservatorio_v1_3() :
    pressao_psi(3500.0),        // Press√£o gen√©rica
    temperatura_C(80.0),         // Temperatura estimada
    volume_oleo_bbl(1000000.0),  // Volume hipot√©tico
    volume_gas_m3(5000.0),       // Volume gen√©rico

// *** VERS√ÉO ATUAL v2.0 - MLS-3A (PO√áO REAL) ***
// Ver arquivo: ESPECIFICACOES_TECNICAS_MLS-3A.md
Reservatorio_MLS3A() :
    pressao_psi(2850.0),         // Press√£o real MLS-3A (2025)
    temperatura_C(92.0),         // Temperatura real do reservat√≥rio
    volume_oleo_bbl(55000000.0), // OOIP restante real
    volume_gas_m3(8500.0),       // Volume g√°s livre atual
    volume_agua_bbl(50000.0),    // Volume inicial realista
    viscosidade_oleo_cp(2.5),    // Ser√° recalculada, valor placeholder
    vazao_oleo_bopd(1200.0),     // 140% acima do m√≠nimo aceit√°vel
    pressao_de_bolha_psi(2800.0), // Menor que press√£o inicial
    pressao_poco_psi(400.0),     // Adequada para produ√ß√£o
    em_emergencia(false),        // Sistema inicia normal
    gas_oil_ratio(300.0),        // 15% do limite cr√≠tico
    water_oil_ratio(0.1),        // 20% do limite cr√≠tico
    tempo_simulacao_s(0.0)       // Contador zerado
{}
```

### Justificativa dos Valores Escolhidos

#### 1. Press√£o do Reservat√≥rio: 3500 psi
- **Range Cr√≠tico**: 1800-6500 psi
- **Valor Escolhido**: 3500 psi (meio do range)
- **Margem de Seguran√ßa**: 1700 psi acima do m√≠nimo, 3000 psi abaixo do m√°ximo
- **Justificativa**: Permite opera√ß√£o est√°vel com decl√≠nio natural de press√£o

#### 2. Temperatura: 80¬∞C
- **Valor Anterior**: 90¬∞C (causava alta viscosidade)
- **Valor Otimizado**: 80¬∞C
- **Impacto**: Redu√ß√£o de ~15% na viscosidade calculada
- **Justificativa**: Temperatura t√≠pica de reservat√≥rios de √≥leo m√©dio

#### 3. Volume de G√°s: 5000 m¬≥
- **Limite Cr√≠tico**: 10000 m¬≥
- **Valor Escolhido**: 5000 m¬≥ (50% do limite)
- **Justificativa**: Permite ac√∫mulo gradual sem atingir limite cr√≠tico rapidamente

#### 4. Volume de √Ågua: 50.000 bbl
- **Valor Anterior**: 0 bbl (irrealista)
- **Valor Otimizado**: 50000 bbl
- **Justificativa**: Reservat√≥rios reais possuem √°gua connata/bottom water

#### 5. Vaz√£o de √ìleo: 1200 bopd
- **M√≠nimo Aceit√°vel**: 500 bopd
- **Valor Escolhido**: 1200 bopd (240% do m√≠nimo)
- **Justificativa**: Garante opera√ß√£o produtiva desde o in√≠cio

#### 6. GOR (Gas-Oil Ratio): 300
- **Limite Cr√≠tico**: 2000
- **Valor Escolhido**: 300 (15% do limite)
- **Justificativa**: Valor t√≠pico para √≥leo m√©dio, permite aumento gradual

#### 7. WOR (Water-Oil Ratio): 0.1
- **Limite Cr√≠tico**: 0.5
- **Valor Escolhido**: 0.1 (20% do limite)
- **Justificativa**: Baixa produ√ß√£o de √°gua inicial, permite aumento gradual

## F√≥rmula de Viscosidade Otimizada

### Problema da F√≥rmula Original
A f√≥rmula de Standing para viscosidade saturada estava gerando valores extremamente altos:

```cpp
// F√≥rmula original (problem√°tica)
double a = 1.0531e-1 * pow(rs, 0.8) - 1.134e-3 * GRAVIDADE_API + 
           1.258e-2 * temp_F + 3.123e-4 * GRAVIDADE_API * temp_F;
double log10_mu_saturado = pow(10, a);  // Valores muito altos!
```

### Nova F√≥rmula Simplificada
```cpp
double calcularViscosidadeOleo(double pressao_psi, double temperatura_C) {
    // Viscosidade base t√≠pica de reservat√≥rios
    double viscosidade_base = 3.0; // cp
    
    // Fator de temperatura (viscosidade ‚Üì com temperatura ‚Üë)
    double fator_temp = 1.0 - (temperatura_C - 60.0) / 200.0;
    fator_temp = std::max(0.5, std::min(2.0, fator_temp));
    
    // Fator de press√£o (pequeno efeito)
    double fator_pressao = 1.0 + (pressao_psi - 3000.0) / 10000.0;
    fator_pressao = std::max(0.8, std::min(1.2, fator_pressao));
    
    double resultado = viscosidade_base * fator_temp * fator_pressao;
    
    // Garantir que n√£o exceda o limite cr√≠tico
    return std::min(resultado, LIMITE_VISCOSIDADE_CRITICO - 0.5);
}
```

### Caracter√≠sticas da Nova F√≥rmula:
- **Valores T√≠picos**: 2.0 - 5.5 cp
- **Comportamento Realista**: Viscosidade ‚Üì com temperatura ‚Üë
- **Limite de Seguran√ßa**: Nunca excede 5.5 cp (limite cr√≠tico: 6.0 cp)
- **Depend√™ncia de Press√£o**: Efeito m√≠nimo e controlado
- **Estabilidade**: Sem varia√ß√µes bruscas ou valores extremos

## Corre√ß√µes de Threading Qt

### Problema Original
```cpp
SimuladorWindow() : QMainWindow(parent) {
    // ...
    simulationTimer->start(1000); // ‚ùå Imediato, causa threading issues
    logMessage("Simula√ß√£o iniciada.");
}
```

### Solu√ß√£o Implementada
```cpp
SimuladorWindow() : QMainWindow(parent) {
    // ...
    // Timer iniciado ap√≥s interface pronta
    QTimer::singleShot(100, this, [this]() { // ‚úÖ Delayed start
        simulationTimer->start(1000);
        logMessage("Simula√ß√£o de plataforma de petr√≥leo iniciada.");
    });
}
```

### Benef√≠cios:
- Evita QSocketNotifier warnings cr√≠ticos
- Interface totalmente inicializada antes do timer
- Aplica√ß√£o permanece est√°vel indefinidamente

## Destructor Melhorado

### Implementa√ß√£o de Seguran√ßa
```cpp
~SimuladorWindow() {
    // Para o timer antes de destruir os objetos
    if (simulationTimer && simulationTimer->isActive()) {
        simulationTimer->stop();
    }
    delete reservatorio;
}
```

## Configura√ß√£o da Aplica√ß√£o Qt

### Atributos de Alto DPI
```cpp
int main(int argc, char *argv[]) {
    // Configura√ß√µes para melhor rendering
    QApplication::setAttribute(Qt::AA_EnableHighDpiScaling, true);
    QApplication::setAttribute(Qt::AA_UseHighDpiPixmaps, true);
    
    QApplication a(argc, argv);
    
    // Metadados da aplica√ß√£o
    a.setApplicationName("Simulador de Plataforma de Petroleo");
    a.setApplicationVersion("1.1");
    
    // Garantir inicializa√ß√£o completa
    a.processEvents();
    
    return a.exec();
}
```

## Valida√ß√£o dos Valores

### Teste de Estabilidade
Para validar os novos valores, foram realizados testes:

1. **Inicializa√ß√£o**: Sistema inicia sem alertas cr√≠ticos
2. **Opera√ß√£o Cont√≠nua**: 15+ minutos sem shutdown autom√°tico
3. **Valores F√≠sicos**: Todos os par√¢metros dentro dos ranges operacionais
4. **Performance**: Interface responsiva, sem lag

### M√©tricas de Valida√ß√£o
- ‚úÖ Press√£o: 3500 psi (dentro do range 1800-6500)
- ‚úÖ Viscosidade: ~2.5 cp (abaixo do limite 6.0)
- ‚úÖ GOR: 300 (abaixo do limite 2000)
- ‚úÖ WOR: 0.1 (abaixo do limite 0.5)
- ‚úÖ Vaz√£o: 1200 bopd (acima do m√≠nimo 500)
- ‚úÖ Volume g√°s: 5000 m¬≥ (abaixo do limite 10000)

## Considera√ß√µes para Desenvolvimento Futuro

### Poss√≠veis Melhorias:
1. **Calibra√ß√£o de Modelos**: Usar dados reais de campo para ajustar correla√ß√µes
2. **Hist√≥rico de Dados**: Salvar configura√ß√µes em arquivo de configura√ß√£o
3. **Perfis de Reservat√≥rio**: M√∫ltiplas configura√ß√µes pr√©-definidas
4. **Valida√ß√£o Din√¢mica**: Verifica√ß√£o de consist√™ncia f√≠sica dos par√¢metros
5. **Interface de Configura√ß√£o**: Permitir ajuste manual dos valores iniciais

### Manutenibilidade:
- Valores centralizados no construtor da classe
- Constantes bem documentadas
- F√≥rmulas simplificadas e compreens√≠veis
- Logs detalhados para debugging

---

## üó∫Ô∏è Roadmap de Vers√µes

| **Vers√£o** | **Descri√ß√£o** | **Status** | **Documenta√ß√£o** |
|------------|----------------|------------|--------------------|
| **v1.1** | Corre√ß√µes iniciais | üìú Hist√≥rico | Este arquivo |
| **v1.2** | Interface redesenhada | üìú Hist√≥rico | `REDESIGN_INTERFACE.md` |
| **v1.3** | Intervalos realistas | üìú Hist√≥rico | Este arquivo |
| **v2.0** | **Simulador MLS-3A** | ‚úÖ **ATUAL** | `ESPECIFICACOES_TECNICAS_MLS-3A.md` |
| **v2.1** | Cen√°rios hist√≥ricos | üï∞Ô∏è Planejada | - |
| **v2.2** | Otimiza√ß√£o avan√ßada | üï∞Ô∏è Futura | - |

---

*Documento t√©cnico hist√≥rico - Vers√µes 1.1-1.3*  
*Para v2.0 MLS-3A: Ver `ESPECIFICACOES_TECNICAS_MLS-3A.md`*  
## üìù √öltimas Altera√ß√µes (v2.0 - Agosto 2025)

### üîß Commit: 01f14d6 - "Propriedades f√≠sicas segundo campo MLS-3"
**Data**: 28/08/2025

#### Implementa√ß√£o de Propriedades F√≠sicas Realistas
- **Campo de Refer√™ncia**: MLS-3A (Marlim Sul) - 26 anos de hist√≥rico operacional
- **Par√¢metros F√≠sicos Atualizados**:
  - Press√£o inicial: 2850 psi (valor real do reservat√≥rio atual)
  - Temperatura: 92¬∞C (temperatura real do reservat√≥rio)
  - Volume OOIP: 55 milh√µes bbl (reservas restantes estimadas)
  - Viscosidade: 2.8 cp (calibrada para √≥leo MLS-3A)
  - GOR: 420 scf/bbl (gas-oil ratio do campo)
  - WOR: 0.15 (water-oil ratio t√≠pica atual)

#### Melhorias na Simula√ß√£o
- **Intervalos de Monitoramento**: 5 segundos (padr√£o Petrobras COI)
- **Decl√≠nio de Produ√ß√£o**: ~11.000 bopd com varia√ß√£o ¬±2% (realista)
- **Deple√ß√£o de Reservas**: Redu√ß√£o gradual de volume a cada timestep
- **Estabilidade de Press√£o**: Mantida em 2850 psi durante opera√ß√£o normal

### üîç Dados de Simula√ß√£o Capturados
O arquivo `simulacao_petroleo.csv` cont√©m 348 pontos de dados coletados durante 28+ minutos de opera√ß√£o:

**Par√¢metros Monitorados**:
- Tempo (min): 0.083 - 28.83 (intervalos de 5s)
- Vaz√£o de √≥leo: 10.786 - 11.226 bopd (varia√ß√£o operacional de ¬±2%)
- Press√£o: 2850 psi ‚Üí 2849.98 psi (deple√ß√£o m√≠nima)
- Viscosidade: 2.80 cp (constante, calibrada)
- Volume restante: 55M ‚Üí 54.99M bbl (consumo de ~780 bbl)
- Temperatura: 92¬∞C (est√°vel)
- GOR: 420 scf/bbl (constante)
- WOR: 0.15 (constante)

### üéØ Valida√ß√£o dos Resultados
- ‚úÖ **Estabilidade**: 28+ minutos de opera√ß√£o cont√≠nua sem falhas
- ‚úÖ **Realismo**: Par√¢metros baseados em dados reais da Petrobras/ANP
- ‚úÖ **Performance**: Varia√ß√£o de vaz√£o dentro de limites operacionais
- ‚úÖ **Consist√™ncia**: Deple√ß√£o de reservas proporcional √† produ√ß√£o

### üìä Contexto Educacional
Esta vers√£o v2.0 representa um marco na evolu√ß√£o do simulador, transitioning de par√¢metros gen√©ricos para dados reais de um dos principais campos petrol√≠feros brasileiros, proporcionando experi√™ncia educacional aut√™ntica com cen√°rios da ind√∫stria nacional.

---

*Documenta√ß√£o das altera√ß√µes v2.0 MLS-3A*  
*Atualizado: 28/08/2025*